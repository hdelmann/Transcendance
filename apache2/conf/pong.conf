<VirtualHost *:443>
    ServerName pong.com
    ServerAlias www.pong.com

    Alias / /var/www/pong/
    <Directory /var/www/pong>
        Require all granted
        Options -Indexes
    </Directory>

    ProxyPreserveHost On

    ProxyPass /api http://django:8001/api
    ProxyPassReverse /api http://django:8001/api

    ErrorDocument 404 /index.html
    Redirect 404 200
    ErrorDocument 403 /index.html
    Redirect 403 200

    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} =websocket [NC]
    RewriteRule /(.*)           ws://django:8001/$1 [P,L]

    ErrorLog ${APACHE_LOG_DIR}/pong_error.log
    CustomLog ${APACHE_LOG_DIR}/pong_access.log combined

    SSLProxyEngine on
    SSLEngine on
    SSLCertificateFile /etc/apache2/certificate/pong.crt
    SSLCertificateKeyFile /etc/apache2/certificate/pong.key
</VirtualHost>